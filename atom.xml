<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Luke&#39;s Wikipedia</title>
  
  <subtitle>人生苦短，珍惜时间</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://finsos.github.io/"/>
  <updated>2018-10-31T13:25:22.306Z</updated>
  <id>http://finsos.github.io/</id>
  
  <author>
    <name>Luke</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>GIT轻量级管理服务搭建</title>
    <link href="http://finsos.github.io/wiki/git%E8%BD%BB%E9%87%8F%E7%BA%A7%E7%AE%A1%E7%90%86%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    <id>http://finsos.github.io/wiki/git轻量级管理服务搭建/</id>
    <published>2018-10-30T16:00:00.000Z</published>
    <updated>2018-10-31T13:25:22.306Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>系统版本：CentOS release 6.4 (Final)<br>系统配置：CPU2核 内存2G 硬盘15G</p></blockquote><p>有git的需求，但是又觉得gitlab太重耗资源，于是决定找个轻量级的git带web来管理，找来找去搞了会儿cgit，但是不带权限控制语法高亮也不是我喜欢的，所有放弃。后面利用了git，gitolite，gitweb三剑客+nginx搭建了，于是有了下面的文档。</p><h2 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h2><ul><li>这个不用多说大家都会<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 直接yum装了</span><br><span class="line">yum -y install git</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>注意：1.7版本不支持语法高亮，建议升级到2.+</p></blockquote><ul><li>接上面，好吧，这里再次踩坑了！<br>centos仓库自带的版本为1.7,因此我们要升级到2.+，这里使用编译安装：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 安装依赖</span><br><span class="line">yum install -y zlib-devel bzip2-devel openssl-devel ncurses-devel gcc perl-ExtUtils-MakeMaker package</span><br><span class="line"># 下载源码包，这里最新2.18</span><br><span class="line">wget https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.18.0.tar.gz</span><br><span class="line"># 解压</span><br><span class="line">tar -zxvf git-2.18.0.tar.gz &amp;&amp; cd git-2.18.0</span><br><span class="line"># 编译安装</span><br><span class="line">./configure --prefix=/usr/local/git all</span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line"># 加环境变量</span><br><span class="line">echo &quot;export PATH=$PATH:/usr/local/git/bin&quot; &gt; /etc/profile.d/git.sh</span><br><span class="line">source /etc/profile.d/git.sh</span><br></pre></td></tr></table></figure></li></ul><h2 id="安装gitolite"><a href="#安装gitolite" class="headerlink" title="安装gitolite"></a>安装gitolite</h2><p>官方的安装介绍，很简单</p><h4 id="git服务器端操作"><a href="#git服务器端操作" class="headerlink" title="git服务器端操作"></a>git服务器端操作</h4><ul><li>切换到git用户目录下去操作<br><code>su - git</code><br><code>mkdir -p ~/bin</code></li><li>克隆仓库<br><code>git clone https://github.com/sitaramc/gitolite</code></li><li>安装<br>这时会在当前目录下生成repositories目录，其中gitolite-admin.git就是我们主要的权限管理仓库<br><code>gitolite/install -ln ~/bin</code></li><li>初始用户<br>这里因为是初始第一个用户，所以是管理员，username.pub是客户端的公钥<br><code>gitolite setup -pk username.pub</code><blockquote><p>！注意：不能初始化管理员在git server上，即，在server上clone权限管理仓库，然后再push到server</p></blockquote></li></ul><h4 id="git客户端操作"><a href="#git客户端操作" class="headerlink" title="git客户端操作"></a>git客户端操作</h4><ul><li>生成一对密钥<br><code>ssh-keygen -t rsa -b 2048 #一路回车空密码</code></li><li>克隆权限管理仓库<br>这里即使用server上初始的管理员机器<br><code>git clone git@gitserver.domain:gitolite-admin.git</code></li><li>配置权限管理<br><code>vim gitolite-admin/conf/gitolite.conf</code></li><li>权限管理介绍</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"># 关键字</span><br><span class="line">C    代表创建，仅在通配符版本库授权是使用，用于指定谁可以创建与通配符匹配的版本库</span><br><span class="line">R    RW    RW+    R为只读，RW为读写权限，RW+代表除了拥有读写权限，还可以强制执行推送</span><br><span class="line">RWC    RW+C    </span><br><span class="line">RWD    RW+D    D代表允许删除和正则匹配的引用</span><br><span class="line">RWCD  RW+CD</span><br><span class="line"></span><br><span class="line"># 定义组，用户</span><br><span class="line">@all    所有组、所有用户、所有版本库</span><br><span class="line">@administrator = admin kid   定义一个administrator组并将用户admin，kid加入该组</span><br><span class="line">@develop = dev01 dev02</span><br><span class="line">@testing = test01 test02</span><br><span class="line"></span><br><span class="line"># 传统模式的引用授权</span><br><span class="line">repo    test/repo1</span><br><span class="line">        RW+ = @administrators  允许管理员组任意读写，强制推送</span><br><span class="line">        RW master refs/heads/feature/ = @develop  除了对master和refs/heads/feature/开头的引用具有读写权限外，实际上可以读取所有引用。这是因为读取操作授权阶段无法获知引用。 </span><br><span class="line">        R = @testing  对版本库拥有只读授权</span><br><span class="line"># 扩展模式的引用授权</span><br><span class="line">扩展模式的引用授权，指的是该版本库的授权指令出现了下列授权关键字中的一个或多个：RWC、RWD、RWCD、RW+C、RW+D、RW+CD，将分支的创建权限和删除权限从读写权限中分离出来，从而可对分支进行更为精细的权限控制。</span><br><span class="line">repo    test/repo2</span><br><span class="line">        RW+CD = @administrators</span><br><span class="line">        RW+C  = @develop</span><br><span class="line">        RW    = @testing</span><br><span class="line"># 以NAME/开头的引用</span><br><span class="line">在授权文件中，如果一个版本库的授权指令中的正则引用字段出现了以NAME/开头的引用，则表明该授权指令是针对路径进行的写授权，并且该版本库要进行基于路径的写授权判断。</span><br><span class="line">repo    foo</span><br><span class="line">    RW        = @junior_devs @senior_devs   两个用户组均可以读写该版本库所有文件</span><br><span class="line">    RW /NAME/ = @senior_devs        只允许高级开发读写特定目录</span><br><span class="line">    -  /NAME/Makefile = @junior_devs        没有访问特定目录Makefile的权限</span><br><span class="line">    RW NAME/  = @junior_devs                允许读写特定路径的所有文件</span><br><span class="line"></span><br><span class="line"># 以VREF/开头的引用</span><br><span class="line">按照DAY，Hour时间限制: VREF/Hour/NN</span><br><span class="line">“NN” can be between 00 to 23</span><br><span class="line">repo bar</span><br><span class="line">    RW+                         =   @all</span><br><span class="line">    -   VREF/Hour/09            =   @junior-devs</span><br><span class="line">    -   VREF/Hour/1[0-9]        =   @junior-devs</span><br><span class="line">    -   VREF/Hour/2[0-9]        =   @junior-devs</span><br><span class="line"></span><br><span class="line">按照来源地址进行限制</span><br><span class="line">repo foo</span><br><span class="line">    RW+ VREF/FROM/192.168.48.0/23   =   @junior-devs</span><br><span class="line">    -   VREF/FROM                   =   @junior-devs</span><br></pre></td></tr></table></figure><blockquote><p>文档引用：<br><a href="http://gitolite.com/gitolite/cookbook/#example-vrefs" rel="external nofollow noopener noreferrer" target="_blank">http://gitolite.com/gitolite/cookbook/#example-vrefs</a><br><a href="https://blog.csdn.net/Rebel_Yangke/article/details/51554499" rel="external nofollow noopener noreferrer" target="_blank">https://blog.csdn.net/Rebel_Yangke/article/details/51554499</a></p></blockquote><ul><li>添加一个用户<br><code>即将用户公钥添加到gitolite-admin/keydir，命名规则：username.pub</code></li><li>提交到git server，提交后才会生效<br><code>git add -A</code><br><code>git commit -a -m &quot;Add user msg&quot;</code><br><code>git push</code><blockquote><p>！注意：不能直接去改git server上的文件，必须经过提交生成，eat dogs food.</p></blockquote></li></ul><h2 id="安装gitweb"><a href="#安装gitweb" class="headerlink" title="安装gitweb"></a>安装gitweb</h2><ul><li>安装spawn-fcgi、fcgi-devel、highlight<br><code>yum -y install spawn-fcgi fcgi-devel highlight</code></li><li><p>安装fastcgi-wrapper</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/gnosek/fcgiwrap.git</span><br><span class="line">cd fcgiwrap</span><br><span class="line">autoreconf -i</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure></li><li><p>启动fastcgi-wrapper<br><code>spawn-fcgi -f /usr/local/sbin/fcgiwrap -a 127.0.0.1 -p 10086</code></p></li><li>安装gitweb<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># yum安装</span><br><span class="line">yum -y install gitweb</span><br><span class="line"># 推荐手动安装,这里同样安装2.18版本，gitweb和git在一个包里</span><br><span class="line">cd git-2.18.0</span><br><span class="line">make GITWEB_PROJECTROOT=&quot;/opt/git&quot; prefix=/usr install-gitweb</span><br><span class="line"># 安装目录在$&#123;PREFIX&#125;/share/gitweb</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>注意：1.7版本不支持语法高亮，建议升级到2.+</p><ul><li>gitweb配置<br>创建<code>/etc/gitweb.conf</code>如果没有的话,配置示例如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># 配置仓库路径</span><br><span class="line">$projectroot = &quot;/home/git/repositories&quot;;</span><br><span class="line"># 配置web需要展示的仓库</span><br><span class="line">$projects_list = &quot;/home/git/projects.list&quot;;</span><br><span class="line">$strict_export = 1;</span><br><span class="line"># 下面就是网站静态文件的设置, / 代表站点根目录</span><br><span class="line"># stylesheet to use</span><br><span class="line">@stylesheets = (&quot;/gitweb.css&quot;);</span><br><span class="line"># javascript code for gitweb</span><br><span class="line">$javascript = &quot;/gitweb.js&quot;;</span><br><span class="line"># logo to use</span><br><span class="line">$logo = &quot;/git-logo.png&quot;;</span><br><span class="line"># the &apos;favicon&apos;</span><br><span class="line">$favicon = &quot;/git-favicon.png&quot;;</span><br><span class="line"># 配置clone的仓库地址，http和ssh</span><br><span class="line">@git_base_url_list = qw(git://git.finsos.com</span><br><span class="line">                        ssh://git.finsos.com/home/git/repositories);</span><br><span class="line"># 显示修改后的最后提交，开启</span><br><span class="line">$feature&#123;&apos;blame&apos;&#125;&#123;&apos;default&apos;&#125; = [1];</span><br><span class="line">$feature&#123;&apos;blame&apos;&#125;&#123;&apos;override&apos;&#125; = 1;</span><br><span class="line"># 关闭快照压缩存档</span><br><span class="line">$feature&#123;&apos;snapshot&apos;&#125;&#123;&apos;default&apos;&#125; = [&apos;zip&apos;, &apos;tgz&apos;];</span><br><span class="line">$feature&#123;&apos;snapshot&apos;&#125;&#123;&apos;override&apos;&#125; = 1;</span><br><span class="line"># 开启语法高亮,1.8+版本才支持</span><br><span class="line">$feature&#123;&apos;highlight&apos;&#125;&#123;&apos;default&apos;&#125; = [1];</span><br></pre></td></tr></table></figure></li></ul><p>资料：<br><a href="https://mirrors.edge.kernel.org/pub/software/scm/git/docs/gitweb.conf.html" rel="external nofollow noopener noreferrer" target="_blank">https://mirrors.edge.kernel.org/pub/software/scm/git/docs/gitweb.conf.html</a><br><a href="https://git.wiki.kernel.org/index.php/Gitweb" rel="external nofollow noopener noreferrer" target="_blank">https://git.wiki.kernel.org/index.php/Gitweb</a></p></blockquote><ul><li>美化gitweb,安装gitweb-theme<br><code>git clone https://github.com/kogakure/gitweb-theme.git</code><ul><li>包里面提供了setup安装脚本<br><code>./setup -vi --install</code></li><li>然并卵，直接把XXX.png和XXX.css拷贝到网站目录下就OK<br><code>\cp -af gitweb-theme/*.{css,png} /var/www/git/</code></li></ul></li></ul><h2 id="安装web服务器，这里选择Nginx"><a href="#安装web服务器，这里选择Nginx" class="headerlink" title="安装web服务器，这里选择Nginx"></a>安装web服务器，这里选择Nginx</h2><ul><li><p>nginx信息</p><blockquote><p>版本：nginx/1.13.8<br>参数：–prefix=/usr/local/nginx –pid-path=/var/run/nginx/nginx.pid –with-threads –with-http_ssl_module –with-http_v2_module –with-http_realip_module –with-http_addition_module –with-http_sub_module –with-http_stub_status_module –with-pcre –with-stream=dynamic –add-dynamic-module=../echo-nginx-module-0.61/</p></blockquote></li><li><p>安装<br>编译安装或者yum安装都行，这里就不写了</p></li><li><p>用htpasswd生成个密码配置站点用<br><code>htpasswd -cmds .password username</code></p></li><li><p>git站点配置示例</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name git.domain.com;</span><br><span class="line">    access_log logs/git.domain.access.log  main;</span><br><span class="line">    error_log logs/git.domain.error.log  warn;</span><br><span class="line">    root /var/www/git;</span><br><span class="line">    # HTTP Basic配置</span><br><span class="line">    auth_basic  &quot;Git Server On domain.com&quot;;</span><br><span class="line">    auth_basic_user_file  conf/.password;</span><br><span class="line">    location ~* ^.+\.(css|png|ico|js)$ &#123;</span><br><span class="line">            expires 30d;</span><br><span class="line">    &#125;</span><br><span class="line">    location / &#123;</span><br><span class="line">            index gitweb.cgi;</span><br><span class="line">            fastcgi_param SCRIPT_FILENAME $document_root/gitweb.cgi;</span><br><span class="line">            fastcgi_pass 127.0.0.1:10086;</span><br><span class="line">            fastcgi_param HTTP_HOST $server_name;</span><br><span class="line">            fastcgi_param PATH_INFO $uri;</span><br><span class="line">            fastcgi_param QUERY_INFO $uri;</span><br><span class="line">            include &quot;fastcgi_params&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>附一个nginx的服务管理脚本</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line"># nginx - this script starts and stops the nginx daemon</span><br><span class="line"># chkconfig:   - 85 15</span><br><span class="line"># description:  Nginx is an HTTP(S) server, HTTP(S) reverse \</span><br><span class="line">#               proxy and IMAP/POP3 proxy server</span><br><span class="line"># processname: nginx</span><br><span class="line"># config:      /etc/nginx/nginx.conf</span><br><span class="line"># config:      /etc/sysconfig/nginx</span><br><span class="line"># pidfile:     /var/run/nginx.pid</span><br><span class="line"></span><br><span class="line"># Source function library.</span><br><span class="line">. /etc/rc.d/init.d/functions</span><br><span class="line"></span><br><span class="line"># Source networking configuration.</span><br><span class="line">. /etc/sysconfig/network</span><br><span class="line"></span><br><span class="line"># Check that networking is up.</span><br><span class="line">[ &quot;$NETWORKING&quot; = &quot;no&quot; ] &amp;&amp; exit 0</span><br><span class="line"></span><br><span class="line">nginx=&quot;/usr/local/nginx/sbin/nginx&quot;</span><br><span class="line">prog=$(basename $nginx)</span><br><span class="line"></span><br><span class="line">NGINX_CONF_FILE=&quot;/usr/local/nginx/conf/nginx.conf&quot;</span><br><span class="line"></span><br><span class="line">[ -f /etc/sysconfig/nginx ] &amp;&amp; . /etc/sysconfig/nginx</span><br><span class="line"></span><br><span class="line">lockfile=/var/lock/subsys/nginx</span><br><span class="line"></span><br><span class="line">make_dirs() &#123;</span><br><span class="line">   # make required directories</span><br><span class="line">   user=`nginx -V 2&gt;&amp;1 | grep &quot;configure arguments:&quot; | sed &apos;s/[^*]*--user=\([^ ]*\).*/\1/g&apos; -`</span><br><span class="line">   options=`$nginx -V 2&gt;&amp;1 | grep &apos;configure arguments:&apos;`</span><br><span class="line">   for opt in $options; do</span><br><span class="line">       if [ `echo $opt | grep &apos;.*-temp-path&apos;` ]; then</span><br><span class="line">           value=`echo $opt | cut -d &quot;=&quot; -f 2`</span><br><span class="line">           if [ ! -d &quot;$value&quot; ]; then</span><br><span class="line">               # echo &quot;creating&quot; $value</span><br><span class="line">               mkdir -p $value &amp;&amp; chown -R $user $value</span><br><span class="line">           fi</span><br><span class="line">       fi</span><br><span class="line">   done</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">start() &#123;</span><br><span class="line">    [ -x $nginx ] || exit 5</span><br><span class="line">    [ -f $NGINX_CONF_FILE ] || exit 6</span><br><span class="line">#    make_dirs</span><br><span class="line">    echo -n $&quot;Starting $prog: &quot;</span><br><span class="line">    daemon $nginx -c $NGINX_CONF_FILE</span><br><span class="line">    retval=$?</span><br><span class="line">    echo</span><br><span class="line">    [ $retval -eq 0 ] &amp;&amp; touch $lockfile</span><br><span class="line">    return $retval</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">stop() &#123;</span><br><span class="line">    echo -n $&quot;Stopping $prog: &quot;</span><br><span class="line">    killproc $prog -QUIT</span><br><span class="line">    retval=$?</span><br><span class="line">    echo</span><br><span class="line">    [ $retval -eq 0 ] &amp;&amp; rm -f $lockfile</span><br><span class="line">    return $retval</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">restart() &#123;</span><br><span class="line">    configtest || return $?</span><br><span class="line">    stop</span><br><span class="line">    sleep 1</span><br><span class="line">    start</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">reload() &#123;</span><br><span class="line">    configtest || return $?</span><br><span class="line">    echo -n $&quot;Reloading $prog: &quot;</span><br><span class="line">    killproc $nginx -HUP</span><br><span class="line">    RETVAL=$?</span><br><span class="line">    echo</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">force_reload() &#123;</span><br><span class="line">    restart</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">configtest() &#123;</span><br><span class="line">  $nginx -t -c $NGINX_CONF_FILE</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">rh_status() &#123;</span><br><span class="line">    status $prog</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">rh_status_q() &#123;</span><br><span class="line">    rh_status &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">case &quot;$1&quot; in</span><br><span class="line">    start)</span><br><span class="line">        rh_status_q &amp;&amp; exit 0</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">    stop)</span><br><span class="line">        rh_status_q || exit 0</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">    restart|configtest)</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">    reload)</span><br><span class="line">        rh_status_q || exit 7</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">    force-reload)</span><br><span class="line">        force_reload</span><br><span class="line">        ;;</span><br><span class="line">    status)</span><br><span class="line">        rh_status</span><br><span class="line">        ;;</span><br><span class="line">    condrestart|try-restart)</span><br><span class="line">        rh_status_q || exit 0</span><br><span class="line">            ;;</span><br><span class="line">    *)</span><br><span class="line">        echo $&quot;Usage: $0 &#123;start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest&#125;&quot;</span><br><span class="line">        exit 2</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;系统版本：CentOS release 6.4 (Final)&lt;br&gt;系统配置：CPU2核 内存2G 硬盘15G&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;有git的需求，但是又觉得gitlab太重耗资源，于是决定找个轻量级的git带web来管理，
      
    
    </summary>
    
      <category term="Git" scheme="http://finsos.github.io/categories/Git/"/>
    
    
      <category term="git管理" scheme="http://finsos.github.io/tags/git%E7%AE%A1%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>一句话命令</title>
    <link href="http://finsos.github.io/wiki/%E4%B8%80%E5%8F%A5%E8%AF%9D%E5%91%BD%E4%BB%A4/"/>
    <id>http://finsos.github.io/wiki/一句话命令/</id>
    <published>2018-10-30T16:00:00.000Z</published>
    <updated>2018-10-31T13:37:31.986Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ansible"><a href="#ansible" class="headerlink" title="ansible"></a>ansible</h2><ul><li>setup模块过滤多个返回参数<br><code>ansible hosts -m setup | sed &#39;s/.*=&gt;//g&#39;|jq &#39;.ansible_facts|{ip: .ansible_default_ipv4.address, version: .ansible_distribution_version}&#39;</code></li></ul><h2 id="openssl"><a href="#openssl" class="headerlink" title="openssl"></a>openssl</h2><ul><li>检查p12证书有效期<br><code>openssl pkcs12 -in push_cert_prod.p12 -nokeys|openssl x509 -noout -startdate -enddate</code></li></ul><h2 id="日常运维"><a href="#日常运维" class="headerlink" title="日常运维"></a>日常运维</h2><ul><li><p>批量curl检查服务能否访问<br><code>ls -l /usr/local/tomcat/webapps |grep ^d|awk &#39;{print $NF}&#39;|xargs -I@ curl -sI http://localhost:8080/@/application.wadl</code></p></li><li><p>统计网络连接状态<br><code>netstat -n | awk &#39;/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}&#39;</code></p></li><li><p>计算系统CPU空闲率<br><code>cat /proc/uptime | awk &#39;{print $2/($1*4)*100 &quot;%&quot;}&#39;</code></p><blockquote><p>uptime第一列表示系统启动到现在使用的时间,第二列是空闲的时间,4表示有4个cpu</p></blockquote></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ansible&quot;&gt;&lt;a href=&quot;#ansible&quot; class=&quot;headerlink&quot; title=&quot;ansible&quot;&gt;&lt;/a&gt;ansible&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;setup模块过滤多个返回参数&lt;br&gt;&lt;code&gt;ansible hosts -m se
      
    
    </summary>
    
      <category term="运维记录" scheme="http://finsos.github.io/categories/%E8%BF%90%E7%BB%B4%E8%AE%B0%E5%BD%95/"/>
    
    
  </entry>
  
  <entry>
    <title>vsftp的一个问题</title>
    <link href="http://finsos.github.io/wiki/vsftp%E7%9A%84%E4%B8%80%E4%B8%AA%E9%97%AE%E9%A2%98/"/>
    <id>http://finsos.github.io/wiki/vsftp的一个问题/</id>
    <published>2018-10-30T16:00:00.000Z</published>
    <updated>2018-10-31T13:25:27.521Z</updated>
    
    <content type="html"><![CDATA[<ul><li>使用pasv模式的时候不能打开port模式的开关，即<code>pasv_enable=YES port_enable=NO</code>，否则就算设置了<code>pasv_min_port和pasv_max_port</code>也不起作用。今天在开启防火墙的时候发现怎么都连不上，原来是数据传输的时候端口并不是预设的端口范围，导致发了syn被防火墙丢弃了。</li></ul><ul><li>启用TLS,直接修改vsftpd.conf，添加如下<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#启用加密</span><br><span class="line">ssl_enable=YES</span><br><span class="line">#使用 TSL v1 加密协议</span><br><span class="line">ssl_tlsv1=YES</span><br><span class="line">#使用eof标志表示上传完成</span><br><span class="line">strict_ssl_read_eof=YES</span><br><span class="line">#证书路径</span><br><span class="line">rsa_cert_file=/etc/letsencrypt/live/itnmg.net/fullchain.pem</span><br><span class="line">#证书私钥路径</span><br><span class="line">rsa_private_key_file=/etc/letsencrypt/live/itnmg.net/privkey.pem</span><br><span class="line">#指定加密算法, 如果不指定, 默认为 DES-CBC3-SHA</span><br><span class="line">ssl_ciphers=ECDHE-RSA-AES128-GCM-SHA256</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;使用pasv模式的时候不能打开port模式的开关，即&lt;code&gt;pasv_enable=YES port_enable=NO&lt;/code&gt;，否则就算设置了&lt;code&gt;pasv_min_port和pasv_max_port&lt;/code&gt;也不起作用。今天在开启防火墙
      
    
    </summary>
    
      <category term="运维记录" scheme="http://finsos.github.io/categories/%E8%BF%90%E7%BB%B4%E8%AE%B0%E5%BD%95/"/>
    
      <category term="FTP" scheme="http://finsos.github.io/categories/%E8%BF%90%E7%BB%B4%E8%AE%B0%E5%BD%95/FTP/"/>
    
    
      <category term="vsftp" scheme="http://finsos.github.io/tags/vsftp/"/>
    
  </entry>
  
  <entry>
    <title>记一次SSL证书问题</title>
    <link href="http://finsos.github.io/wiki/%E8%AE%B0%E4%B8%80%E6%AC%A1SSL%E8%AF%81%E4%B9%A6%E9%97%AE%E9%A2%98/"/>
    <id>http://finsos.github.io/wiki/记一次SSL证书问题/</id>
    <published>2018-10-30T16:00:00.000Z</published>
    <updated>2018-10-31T13:25:35.882Z</updated>
    
    <content type="html"><![CDATA[<h2 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h2><p>新上线一个服务，发现使用浏览器访问没有任何问题，微信IPhone可以访问，Android有些无法访问，排查了公网IP，微信版本，发现没有太多规律，线上排查日志发现连接已经上来了，但是到了nginx就没有日志了。后面排查下来就确定了是SSL证书链缺失导致。</p><h2 id="排查"><a href="#排查" class="headerlink" title="排查"></a>排查</h2><ul><li>使用openssl访问测试<br><code>openssl s_client -connect check.jmc.com.cn:443</code><br>报错如下：<blockquote><p>CONNECTED(00000003)<br>…<br>verify error:num=20:unable to get local issuer certificate<br>verify return:1<br>…<br>verify error:num=27:certificate not trusted<br>verify return:1<br>…<br>verify error:num=21:unable to verify the first certificate<br>verify return:1<br>…<br>Certificate chain<br>0 s:/C=CN/ST=Jiangxi/L=Nanchang/O=Jiangling Motors Co.,LTD/OU=IT/CN=*.jmc.com.cn<br> i:/C=US/O=DigiCert Inc/CN=DigiCert SHA2 Secure Server CA</p></blockquote></li></ul><p>解释： </p><ul><li>Certificate chain显示了证书链，最前面为序号，从0开始</li><li>s: Server CA，i: Information CA</li></ul><p>这里可以看出，证书链中只有一个证书信息，并没有显示Information CA的签发证书，由此可见是证书链缺失，导致TLS验证不过</p><h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><ul><li><p>由于客户那边提供的PFX格式的证书，所以需要分离出pem证书和key<br><code>openssl pkcs12 -in mycert.pfx -nokeys -out mycert.pem</code><br><code>openssl pkcs12 -in mycert.pfx -nocerts -nodes -out mycert.key</code></p></li><li><p>此时有两种办法：</p><ol><li>向证书供应商索取fullchain证书，即包含完整证书链的证书</li><li>去证书官方网站查找是否有Information CRT可供下载，如果有，就可以下载下来添加到我们的server证书中去</li></ol></li><li><p>这里用了第二种，在digicert官网下载CRT证书</p><blockquote><p><a href="https://www.digicert.com/digicert-root-certificates.htm" rel="external nofollow noopener noreferrer" target="_blank">https://www.digicert.com/digicert-root-certificates.htm</a><br>这里我们缺少的CN为 “DigiCert SHA2 Secure Server CA”，因此下载对应的CRT<br>CN也可通过浏览器访问时查询证书关系得知</p></blockquote></li><li><p>下载的CRT证书因为是DER格式的，所以我们还需要转换成PEM格式<br><code>openssl x509 -inform DER -in DigiCertSHA2SecureServerCA.crt -outform PEM -out informaition.pem</code></p></li><li><p>接下来只需要将两个证书合并在一起就可以了，合并时遵循最上面是 S 其次 I 最后 R，但是一般R都是内置了，所以可以省略</p><blockquote><p>S: Server CA   #域名证书<br>I: Information CA  #机构证书<br>R: Root CA  #根证书</p></blockquote></li><li><p>然后在nginx上配置我们改过的pem证书文件，以及分离的证书key，访问测试</p><blockquote><p>…<br>Certificate chain<br>0 s:/C=CN/ST=Jiangxi/L=Nanchang/O=Jiangling Motors Co.,LTD/OU=IT/CN=*.jmc.com.cn<br> i:/C=US/O=DigiCert Inc/CN=DigiCert SHA2 Secure Server CA<br>1 s:/C=US/O=DigiCert Inc/CN=DigiCert SHA2 Secure Server CA<br> i:/C=US/O=DigiCert Inc/OU=www.digicert.com/CN=DigiCert Global Root CA<br>…<br>Verify return code: 0 (ok)</p></blockquote></li></ul><p>成功。</p><p>后通过之前有问题的设备，打开微信访问域名已经可以打开并显示页面了。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;现象&quot;&gt;&lt;a href=&quot;#现象&quot; class=&quot;headerlink&quot; title=&quot;现象&quot;&gt;&lt;/a&gt;现象&lt;/h2&gt;&lt;p&gt;新上线一个服务，发现使用浏览器访问没有任何问题，微信IPhone可以访问，Android有些无法访问，排查了公网IP，微信版本，发现没有太多
      
    
    </summary>
    
      <category term="运维记录" scheme="http://finsos.github.io/categories/%E8%BF%90%E7%BB%B4%E8%AE%B0%E5%BD%95/"/>
    
      <category term="Web服务" scheme="http://finsos.github.io/categories/%E8%BF%90%E7%BB%B4%E8%AE%B0%E5%BD%95/Web%E6%9C%8D%E5%8A%A1/"/>
    
    
      <category term="ssl,http" scheme="http://finsos.github.io/tags/ssl-http/"/>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://finsos.github.io/wiki/%E5%A5%BD%E5%90%AC%E7%9A%84%E6%AD%8C%E5%8D%95/"/>
    <id>http://finsos.github.io/wiki/好听的歌单/</id>
    <published>2018-08-31T14:41:10.947Z</published>
    <updated>2018-08-31T15:03:08.116Z</updated>
    
    <content type="html"><![CDATA[<h2 id="好听的歌单"><a href="#好听的歌单" class="headerlink" title="好听的歌单"></a>好听的歌单</h2><ul><li>可能否 - 小木雅</li><li>好可惜 - 庄心妍</li><li>过客 - 阿涵</li><li>再见只是陌生人 - 庄心妍</li><li>不再联系 - 夏天Alex</li><li>后来的我们 - 刘增瞳</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;好听的歌单&quot;&gt;&lt;a href=&quot;#好听的歌单&quot; class=&quot;headerlink&quot; title=&quot;好听的歌单&quot;&gt;&lt;/a&gt;好听的歌单&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;可能否 - 小木雅&lt;/li&gt;
&lt;li&gt;好可惜 - 庄心妍&lt;/li&gt;
&lt;li&gt;过客 - 阿涵&lt;/li&gt;
&lt;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Welcome to luke&#39;s wiki site!</title>
    <link href="http://finsos.github.io/wiki/index/"/>
    <id>http://finsos.github.io/wiki/index/</id>
    <published>2018-07-28T14:17:42.534Z</published>
    <updated>2018-07-29T07:25:37.770Z</updated>
    
    <content type="html"><![CDATA[<h2 id="导语"><a href="#导语" class="headerlink" title="导语"></a>导语</h2><p>这只是个人知识站点，主要用于记录平时一些知识碎片，同时也方便自己今后查阅，内容不限定，有时间就更新。</p><p>大概理一下主要内容：</p><ul><li>平时学习前沿的技术，做个知识积累</li><li>学习成果，开发的一些工具之类</li><li>工作中踩过的坑，既然填坑了，那就铺条路出来</li><li>生活中的琐碎心情</li><li>推荐的书籍，阅读心得</li><li>互联网资讯类，新鲜事儿</li><li>电影音乐类，毕竟我爱电视剧，😁</li><li>摄影类，美丽的事物赏心悦目</li></ul><p>事情比较杂，但是主要是专心于技术，学习，提升自我。</p><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><p>最后来张图，大家共勉。</p><blockquote><p>凛冬已至，还不赶紧逼自己一把。</p></blockquote><p><img src="https://i.imgur.com/8pydVpW.jpg" alt="夜王" title="夜王来了"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;导语&quot;&gt;&lt;a href=&quot;#导语&quot; class=&quot;headerlink&quot; title=&quot;导语&quot;&gt;&lt;/a&gt;导语&lt;/h2&gt;&lt;p&gt;这只是个人知识站点，主要用于记录平时一些知识碎片，同时也方便自己今后查阅，内容不限定，有时间就更新。&lt;/p&gt;
&lt;p&gt;大概理一下主要内容：&lt;/
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Elasticsearch快照备份</title>
    <link href="http://finsos.github.io/wiki/Elasticsearch%E5%BF%AB%E7%85%A7%E5%A4%87%E4%BB%BD/"/>
    <id>http://finsos.github.io/wiki/Elasticsearch快照备份/</id>
    <published>2018-07-28T14:04:58.090Z</published>
    <updated>2018-07-28T15:09:40.267Z</updated>
    
    <content type="html"><![CDATA[<h2 id="版本信息"><a href="#版本信息" class="headerlink" title="版本信息"></a>版本信息</h2><blockquote><p>ElasticSearch: 5.3.0<br>JDK: 1.8<br>OS: CentOS release 6.8 (Final)</p></blockquote><h2 id="修改bin-elasticsearch-plugin（如plugin命令不可用）"><a href="#修改bin-elasticsearch-plugin（如plugin命令不可用）" class="headerlink" title="修改bin/elasticsearch-plugin（如plugin命令不可用）"></a>修改bin/elasticsearch-plugin（如plugin命令不可用）</h2><blockquote><p>使用ansible-elasticsearch这个playbook安装会存在此问题</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># For a distribution package, the value is "/etc/sysconfig/elasticsearch".</span></span><br><span class="line">ES_ENV_FILE=<span class="string">"/etc/sysconfig/这里修改为实际的配置文件名"</span></span><br></pre></td></tr></table></figure><h2 id="安装repository-hdfs插件"><a href="#安装repository-hdfs插件" class="headerlink" title="安装repository-hdfs插件"></a>安装repository-hdfs插件</h2><ul><li>安装命令</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/share/elasticsearch/bin</span><br><span class="line">./elasticsearch-plugin install repository-hdfs</span><br></pre></td></tr></table></figure><ul><li>修改配置plugin-security.policy(5.3版本bug)</li></ul><p>Q: 创建快照时会报错</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.security.AccessControlException: access denied (<span class="string">"javax.security.auth.PrivateCredentialPermission"</span> <span class="string">"org.apache.hadoop.security.Credentials"</span> <span class="string">"read"</span>)</span><br></pre></td></tr></table></figure><p>A: 修复报错</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改 ../plugins/repository-hdfs/plugin-security.policy</span></span><br><span class="line"><span class="comment"># 增加如下：</span></span><br><span class="line">  permission java.lang.RuntimePermission <span class="string">"accessDeclaredMembers"</span>;</span><br><span class="line">  permission java.lang.RuntimePermission <span class="string">"getClassLoader"</span>;</span><br><span class="line">  permission java.lang.RuntimePermission <span class="string">"shutdownHooks"</span>;</span><br><span class="line">  permission java.lang.reflect.ReflectPermission <span class="string">"suppressAccessChecks"</span>;</span><br><span class="line">  permission javax.security.auth.AuthPermission <span class="string">"doAs"</span>;</span><br><span class="line">  permission javax.security.auth.AuthPermission <span class="string">"getSubject"</span>;</span><br><span class="line">  permission javax.security.auth.AuthPermission <span class="string">"modifyPrivateCredentials"</span>;</span><br><span class="line">  permission java.security.AllPermission;</span><br><span class="line">  permission java.util.PropertyPermission <span class="string">"*"</span>, <span class="string">"read,write"</span>;</span><br><span class="line">  permission javax.security.auth.PrivateCredentialPermission <span class="string">"org.apache.hadoop.security.Credentials * \"*\""</span>, <span class="string">"read"</span>;</span><br><span class="line">  </span><br><span class="line"><span class="comment"># 修改Elastic配置目录下jvm.options</span></span><br><span class="line"><span class="comment"># 指定权限文件</span></span><br><span class="line">-Djava.security.policy=file:///usr/share/elasticsearch/plugins/repository-hdfs/plugin-security.policy</span><br></pre></td></tr></table></figure><h2 id="重启ES服务加载插件"><a href="#重启ES服务加载插件" class="headerlink" title="重启ES服务加载插件"></a>重启ES服务加载插件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/elasticsearch restart</span><br></pre></td></tr></table></figure><h2 id="利用快照API备份"><a href="#利用快照API备份" class="headerlink" title="利用快照API备份"></a>利用快照API备份</h2><ul><li>在hdfs上创建备份目录授权</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -mkdir /es_backup</span><br><span class="line"><span class="comment">#要求es用户可读写</span></span><br><span class="line">hadoop fs -chown elasticsearch:elasticsearch /es_backup</span><br></pre></td></tr></table></figure><ul><li>创建仓库</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">PUT /_snapshot/my_backup  </span><br><span class="line">&#123;  </span><br><span class="line">  <span class="string">"type"</span>: <span class="string">"hdfs"</span>,  </span><br><span class="line">  <span class="string">"settings"</span>: &#123;  </span><br><span class="line">         <span class="string">"path"</span>: <span class="string">"/es_backup"</span>,  </span><br><span class="line">         <span class="string">"load_defaults"</span>: <span class="string">"true"</span>,  </span><br><span class="line">         <span class="string">"compress"</span>: <span class="string">"true"</span>,  </span><br><span class="line">         <span class="string">"uri"</span>: <span class="string">"hdfs://172.26.33.55:8020"</span></span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 查看仓库信息</span></span><br><span class="line">GET /_snapshot/my_backup</span><br><span class="line"><span class="comment"># 删除仓库</span></span><br><span class="line">DELETE /_snapshot/my_backup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 此时查看HDFS上的文件</span></span><br><span class="line">hadoop fs -ls /es_backup</span><br><span class="line">hadoop fs -cat /es_backup/index-0</span><br></pre></td></tr></table></figure><ul><li>创建快照</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">PUT /_snapshot/my_backup/snapshot_1?wait_for_completion=<span class="literal">true</span>  </span><br><span class="line">&#123;  </span><br><span class="line">  <span class="string">"indices"</span>: <span class="string">"index_1,index_2"</span>, //不设置这个属性，默认备份所有index</span><br><span class="line">  <span class="string">"ignore_unavailable"</span>: <span class="literal">true</span>,  </span><br><span class="line">  <span class="string">"include_global_state"</span>: <span class="literal">false</span>  </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 查看快照信息，支持通配符</span></span><br><span class="line">GET _snapshot/my_backup/snapshot_1</span><br><span class="line"><span class="comment"># 删除快照，这里只是es的引用删除，hdfs中的文件并不会删除</span></span><br><span class="line">DELETE _snapshot/my_backup/snapshot_1</span><br></pre></td></tr></table></figure><ul><li>恢复快照</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">POST /_snapshot/my_backup/snapshot_1/_restore  </span><br><span class="line">&#123;  </span><br><span class="line">  <span class="string">"indices"</span>: <span class="string">"index_1,index_2"</span>,   //指定索引恢复，不指定就是所有</span><br><span class="line">  <span class="string">"ignore_unavailable"</span>: <span class="literal">true</span>,     //忽略恢复时异常索引  </span><br><span class="line">  <span class="string">"include_global_state"</span>: <span class="literal">false</span>,  //是否存储全局转态信息,fasle代表有一个或几个失败，不会导致整个任务失败  </span><br><span class="line">  <span class="string">"rename_pattern"</span>: <span class="string">"index_(.+)"</span>, //是否需要重命名索引  </span><br><span class="line">  <span class="string">"rename_replacement"</span>: <span class="string">"restored_index_<span class="variable">$1</span>"</span> //替换后的索引名  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 监控恢复情况</span></span><br><span class="line">GET restored_index_1/_recovery</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;版本信息&quot;&gt;&lt;a href=&quot;#版本信息&quot; class=&quot;headerlink&quot; title=&quot;版本信息&quot;&gt;&lt;/a&gt;版本信息&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;ElasticSearch: 5.3.0&lt;br&gt;JDK: 1.8&lt;br&gt;OS: CentOS re
      
    
    </summary>
    
      <category term="Elasticsearch" scheme="http://finsos.github.io/categories/Elasticsearch/"/>
    
    
      <category term="elasticsearch" scheme="http://finsos.github.io/tags/elasticsearch/"/>
    
  </entry>
  
  <entry>
    <title>准备开始 深度学习</title>
    <link href="http://finsos.github.io/wiki/%E8%BF%9B%E5%86%9B%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    <id>http://finsos.github.io/wiki/进军深度学习/</id>
    <published>2018-02-26T14:11:01.614Z</published>
    <updated>2018-07-28T15:25:11.999Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>一直写了没有发出， 拖沓症真的挺严重。。。</p></blockquote><h2 id="进军深度学习课程"><a href="#进军深度学习课程" class="headerlink" title="进军深度学习课程"></a>进军深度学习课程</h2><p>近期看了一些关于人工智能系列的文章，对这种前沿的技术充满了兴趣，但是苦于上学时候没有好好学习😂，所以想补充一下数学基础知识。学习的过程中顺便温习了一下解方程</p><h2 id="目前看的数学书籍"><a href="#目前看的数学书籍" class="headerlink" title="目前看的数学书籍"></a>目前看的数学书籍</h2><ul><li><p>线性代数</p><p>看了前面几章，了解了下向量的概念，以及矩阵的概念。其次，就是解方程组。</p><blockquote><p>又是一两个月没看了，忘得差不多了，唉</p></blockquote></li><li><p>离散数学</p><p>暂时搁置</p></li></ul><h2 id="简单数学示例"><a href="#简单数学示例" class="headerlink" title="简单数学示例"></a>简单数学示例</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/env python</span></span><br><span class="line"><span class="comment">#-*-encoding: utf8-*-</span></span><br><span class="line"><span class="comment">#python解一元方程</span></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">usag: </span></span><br><span class="line"><span class="string">    simple.py number power symbol</span></span><br><span class="line"><span class="string">notice: </span></span><br><span class="line"><span class="string">    please input full args.</span></span><br><span class="line"><span class="string">args: </span></span><br><span class="line"><span class="string">    number - you can input any numbers.</span></span><br><span class="line"><span class="string">    power  - it's a power for number like 3^2, the 2 is 3'power.</span></span><br><span class="line"><span class="string">    symbol - the math symbol like +,-,*,/</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">quadratic</span><span class="params">(number, power, symbol)</span>:</span></span><br><span class="line">    i = <span class="number">1</span></span><br><span class="line">    result = []</span><br><span class="line">    text = []</span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        calc_text = str(pow(number, power)) + <span class="string">' '</span> + symbol + <span class="string">' '</span> + str(pow((number - i), power))            </span><br><span class="line">        calc_result = eval(calc_text)</span><br><span class="line">        i += <span class="number">1</span>     </span><br><span class="line">        <span class="keyword">if</span> calc_result &lt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">print</span> (<span class="string">u'no solution!'</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> i &gt; number:</span><br><span class="line">            <span class="keyword">break</span>       </span><br><span class="line">        result.append(calc_result)</span><br><span class="line">        text.append(calc_text)</span><br><span class="line">    <span class="keyword">return</span> result, text</span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        number = os.sys.argv[<span class="number">1</span>]</span><br><span class="line">        power  = os.sys.argv[<span class="number">2</span>]</span><br><span class="line">        symbol = os.sys.argv[<span class="number">3</span>]</span><br><span class="line">        number = int(number)</span><br><span class="line">        power  = int(power)</span><br><span class="line">        symbol = str(symbol)</span><br><span class="line">        symbol_standard = <span class="string">'+-*/'</span></span><br><span class="line">        symbol_sense = string.find(symbol_standard, symbol) != <span class="number">-1</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> (isinstance(number,int) <span class="keyword">and</span> isinstance(power,int) <span class="keyword">and</span> symbol_sense):</span><br><span class="line">            <span class="keyword">print</span> (__doc__)</span><br><span class="line">            os.sys.exit(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception:</span><br><span class="line">        <span class="keyword">print</span> (__doc__)</span><br><span class="line">        os.sys.exit(<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">    (result,text) = quadratic(number, power, symbol)</span><br><span class="line">    </span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    total = int()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(text)):</span><br><span class="line">        total += result[i]</span><br><span class="line">        <span class="keyword">print</span> (<span class="string">'%s = %s'</span> % (text[i], result[i]))</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> i &gt; len(text):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">print</span> (<span class="string">'total: %s \nlength: %s \naverage: %s'</span> % (total, len(text), round(total/len(text))))</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;一直写了没有发出， 拖沓症真的挺严重。。。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;进军深度学习课程&quot;&gt;&lt;a href=&quot;#进军深度学习课程&quot; class=&quot;headerlink&quot; title=&quot;进军深度学习课程&quot;&gt;&lt;/a&gt;进军深度学习
      
    
    </summary>
    
      <category term="文笔随记" scheme="http://finsos.github.io/categories/%E6%96%87%E7%AC%94%E9%9A%8F%E8%AE%B0/"/>
    
      <category term="向往" scheme="http://finsos.github.io/categories/%E6%96%87%E7%AC%94%E9%9A%8F%E8%AE%B0/%E5%90%91%E5%BE%80/"/>
    
    
      <category term="python" scheme="http://finsos.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>centos搭建局域网repo源</title>
    <link href="http://finsos.github.io/wiki/centos%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0repo%E6%BA%90/"/>
    <id>http://finsos.github.io/wiki/centos搭建本地repo源/</id>
    <published>2018-01-20T05:35:41.000Z</published>
    <updated>2018-07-28T15:24:47.264Z</updated>
    
    <content type="html"><![CDATA[<p>起初是因为有些时候需要安装的一些包总是在系统自带的repo仓库找不到，有些国外的源又很慢，自己本地都要下载很长时间，偶尔又有一些依赖缺失之类的，干脆就把自己工作环境中所需要的包存起来，自己建一个内网仓库，于是有了下面这篇文章。</p><h2 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h2><ul><li>安装httpd服务或者nginx服务。#省略</li></ul><h2 id="一些目录设定"><a href="#一些目录设定" class="headerlink" title="一些目录设定"></a>一些目录设定</h2><ul><li>DocumentRoot: /var/www/html</li><li>RepoDirectory: /var/www/html/HDP-UTILS-1.1.0.21</li><li>脚本目录： /etc/init.d</li></ul><h2 id="下载需要的RPM"><a href="#下载需要的RPM" class="headerlink" title="下载需要的RPM"></a>下载需要的RPM</h2><ul><li>进入DocumentRoot，将下载的rpm包copy至该目录</li><li><p>或者直接从已有源地址仓库下载：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#下载该目录下所有文件</span></span><br><span class="line">wget -c -r -np -P /var/www/html http://hdp.domain/HDP-UTILS-1.1.0.21</span><br></pre></td></tr></table></figure></li><li><p>解释一下wget命令的用法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-c 断点续传</span><br><span class="line">-r 递归下载</span><br><span class="line">-np 不下载父附录</span><br><span class="line">-nd 不建立目录，若无此选项，将按照网站目录结构创建目录</span><br><span class="line">-P 将下载的所有内容存放到指定目录</span><br></pre></td></tr></table></figure></li></ul><h2 id="使用createrepo命令创建repo信息"><a href="#使用createrepo命令创建repo信息" class="headerlink" title="使用createrepo命令创建repo信息"></a>使用createrepo命令创建repo信息</h2><ul><li><p>安装createrepo</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#一般centos自带的yum仓库就有</span></span><br><span class="line">yum install -y createrepo</span><br></pre></td></tr></table></figure></li><li><p>执行命令创建repo</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#初始化源,生成repodata元数据,保存在RepoDirectory</span><br><span class="line">createrepo --workers=2 -pdo /var/www/html/HDP-UTILS-1.1.0.21 /var/www/html/HDP-UTILS-1.1.0.21 -c /tmp/HDP-UTILS-1.1.0.21 -v</span><br></pre></td></tr></table></figure></li><li><p>解释一下createrepo命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-p 以漂亮的格式输出xml</span><br><span class="line">-d 使用sqlite存储生成的元数据，默认项</span><br><span class="line">-o 指定元数据的输出位置</span><br><span class="line">-c 指定缓存目录，缓存软件仓库中软件包的校验和信息</span><br><span class="line">-v 以详细模式输出</span><br></pre></td></tr></table></figure></li></ul><h2 id="启动http服务"><a href="#启动http服务" class="headerlink" title="启动http服务"></a>启动http服务</h2><ul><li>启动服务以供其他机器访问<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/httpd restart</span><br></pre></td></tr></table></figure></li></ul><h2 id="创建客户端使用的repo文件"><a href="#创建客户端使用的repo文件" class="headerlink" title="创建客户端使用的repo文件"></a>创建客户端使用的repo文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/yum.repos.d/HDP-UTILS.repo &lt;&lt;EOF</span><br><span class="line">    <span class="comment">#VERSION_NUMBER=1.1.0.21</span></span><br><span class="line">    [HDP-UTILS-1.1.0.21]</span><br><span class="line">    name=HDP-UTILS-1.1.0.21</span><br><span class="line">    baseurl=http://local.network.domain/HDP-UTILS-1.1.0.21/</span><br><span class="line">    gpgcheck=0</span><br><span class="line">    enabled=1</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h2 id="访问测试"><a href="#访问测试" class="headerlink" title="访问测试"></a>访问测试</h2><ul><li>浏览器访问[<a href="http://local.network.domain/HDP-UTILS-1.1.0.21/" rel="external nofollow noopener noreferrer" target="_blank">http://local.network.domain/HDP-UTILS-1.1.0.21/</a>]</li><li>客户端服务器使用命令 <code>yum repolist|grep &quot;HDP-UTILS-1.1.0.21&quot;</code> 看能否获取到正确的repo和文件数量</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;起初是因为有些时候需要安装的一些包总是在系统自带的repo仓库找不到，有些国外的源又很慢，自己本地都要下载很长时间，偶尔又有一些依赖缺失之类的，干脆就把自己工作环境中所需要的包存起来，自己建一个内网仓库，于是有了下面这篇文章。&lt;/p&gt;
&lt;h2 id=&quot;依赖&quot;&gt;&lt;a href
      
    
    </summary>
    
      <category term="运维记录" scheme="http://finsos.github.io/categories/%E8%BF%90%E7%BB%B4%E8%AE%B0%E5%BD%95/"/>
    
      <category term="Linux" scheme="http://finsos.github.io/categories/%E8%BF%90%E7%BB%B4%E8%AE%B0%E5%BD%95/Linux/"/>
    
    
      <category term="repo仓库" scheme="http://finsos.github.io/tags/repo%E4%BB%93%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>写在第一篇文章的话</title>
    <link href="http://finsos.github.io/wiki/%E5%86%99%E5%9C%A8%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0%E7%9A%84%E8%AF%9D/"/>
    <id>http://finsos.github.io/wiki/写在第一篇文章的话/</id>
    <published>2018-01-19T15:23:44.000Z</published>
    <updated>2018-07-28T20:12:42.575Z</updated>
    
    <content type="html"><![CDATA[<p>博客开张了，The first blood还是要贡献一下，接触博客好多，今天算是第一次完全搭建属于自己的个人博客，也是无意间接触到GitHub Pages，觉得很方便，而且完美支持Markdown，就这么选好模板入坑了。</p><h2 id="写在第一篇文章的话"><a href="#写在第一篇文章的话" class="headerlink" title="写在第一篇文章的话"></a>写在第一篇文章的话</h2><p>这个博客，主要是用于记录自己的学习过程，以及工作中所踩的一些新坑，包括自己脑子记不住的知识点(大家都懂的^_^)!</p><p>其实偶尔也会有一些自己的心情体会发表一下，主要是吐槽啦~</p><h2 id="为什么开博客"><a href="#为什么开博客" class="headerlink" title="为什么开博客"></a>为什么开博客</h2><ul><li>希望养成良好的个人习惯</li><li>技术更新迭代很快，对我这种战5渣的冲击力太大，必须时刻提醒自己要思（挣）考（钱）！要学（高）习（薪）！</li><li>不定时更新，自己满足就好，当然，如果文章中有涉及到可以帮助大家的知识点，我也是很开心啦啦啦~</li></ul><h2 id="我是什么人"><a href="#我是什么人" class="headerlink" title="我是什么人"></a>我是什么人</h2><ul><li>目前一名普通的Linux运维（民工）</li><li>接触了一些貌似高大山的东西，消息队列、分布式计算、分布式存储、虚拟化、自动化运维、DevOps 等等</li><li>对于上面那些平时光说，光听，实际原理其实并没有吃透，纯粹操作一点，学会一点，其实然并卵。</li></ul><h2 id="本篇完"><a href="#本篇完" class="headerlink" title="本篇完"></a>本篇完</h2><ul><li>有点晚了，需要睡觉了，想起来再说。</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;博客开张了，The first blood还是要贡献一下，接触博客好多，今天算是第一次完全搭建属于自己的个人博客，也是无意间接触到GitHub Pages，觉得很方便，而且完美支持Markdown，就这么选好模板入坑了。&lt;/p&gt;
&lt;h2 id=&quot;写在第一篇文章的话&quot;&gt;&lt;a 
      
    
    </summary>
    
      <category term="文笔随记" scheme="http://finsos.github.io/categories/%E6%96%87%E7%AC%94%E9%9A%8F%E8%AE%B0/"/>
    
      <category term="心情" scheme="http://finsos.github.io/categories/%E6%96%87%E7%AC%94%E9%9A%8F%E8%AE%B0/%E5%BF%83%E6%83%85/"/>
    
    
  </entry>
  
</feed>
