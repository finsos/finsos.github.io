<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Luke&#39;s Wikipedia</title>
  
  <subtitle>人生苦短，珍惜时间</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://finsos.github.io/"/>
  <updated>2018-07-28T15:22:51.878Z</updated>
  <id>http://finsos.github.io/</id>
  
  <author>
    <name>Luke</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Welcome to luke&#39;s wiki site!</title>
    <link href="http://finsos.github.io/wiki/index/"/>
    <id>http://finsos.github.io/wiki/index/</id>
    <published>2018-07-28T14:17:42.534Z</published>
    <updated>2018-07-28T15:22:51.878Z</updated>
    
    <content type="html"><![CDATA[<h2 id="导语"><a href="#导语" class="headerlink" title="导语"></a>导语</h2><p>这只是个人知识站点，主要用于记录平时一些知识碎片，同时也方便自己今后查阅，内容不限定，有时间就更新。</p><p>大概理一下主要内容：</p><ul><li>平时学习前沿的技术，做个知识积累</li><li>学习成果，开发的一些工具之类</li><li>工作中踩过的坑，既然填坑了，那就铺条路出来</li><li>生活中的琐碎心情</li><li>推荐的书籍，阅读心得</li><li>互联网资讯类，新鲜事儿</li><li>电影音乐类，毕竟我爱电视剧，😁</li><li>摄影类，美丽的事物赏心悦目</li></ul><p>事情比较杂，但是主要是专心于技术，学习，提升自我。</p><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><p>最后来张图，大家共勉。</p><blockquote><p>凛冬已至，还不赶紧逼自己一把。</p></blockquote><p><img src="https://i.imgur.com/8pydVpW.jpg" alt="夜王" title="夜王来了"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;导语&quot;&gt;&lt;a href=&quot;#导语&quot; class=&quot;headerlink&quot; title=&quot;导语&quot;&gt;&lt;/a&gt;导语&lt;/h2&gt;&lt;p&gt;这只是个人知识站点，主要用于记录平时一些知识碎片，同时也方便自己今后查阅，内容不限定，有时间就更新。&lt;/p&gt;
&lt;p&gt;大概理一下主要内容：&lt;/
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Elasticsearch快照备份</title>
    <link href="http://finsos.github.io/wiki/Elasticsearch%E5%BF%AB%E7%85%A7%E5%A4%87%E4%BB%BD/"/>
    <id>http://finsos.github.io/wiki/Elasticsearch快照备份/</id>
    <published>2018-07-28T14:04:58.090Z</published>
    <updated>2018-07-28T15:09:40.267Z</updated>
    
    <content type="html"><![CDATA[<h2 id="版本信息"><a href="#版本信息" class="headerlink" title="版本信息"></a>版本信息</h2><blockquote><p>ElasticSearch: 5.3.0<br>JDK: 1.8<br>OS: CentOS release 6.8 (Final)</p></blockquote><h2 id="修改bin-elasticsearch-plugin（如plugin命令不可用）"><a href="#修改bin-elasticsearch-plugin（如plugin命令不可用）" class="headerlink" title="修改bin/elasticsearch-plugin（如plugin命令不可用）"></a>修改bin/elasticsearch-plugin（如plugin命令不可用）</h2><blockquote><p>使用ansible-elasticsearch这个playbook安装会存在此问题</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># For a distribution package, the value is "/etc/sysconfig/elasticsearch".</span></span><br><span class="line">ES_ENV_FILE=<span class="string">"/etc/sysconfig/这里修改为实际的配置文件名"</span></span><br></pre></td></tr></table></figure><h2 id="安装repository-hdfs插件"><a href="#安装repository-hdfs插件" class="headerlink" title="安装repository-hdfs插件"></a>安装repository-hdfs插件</h2><ul><li>安装命令</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/share/elasticsearch/bin</span><br><span class="line">./elasticsearch-plugin install repository-hdfs</span><br></pre></td></tr></table></figure><ul><li>修改配置plugin-security.policy(5.3版本bug)</li></ul><p>Q: 创建快照时会报错</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.security.AccessControlException: access denied (<span class="string">"javax.security.auth.PrivateCredentialPermission"</span> <span class="string">"org.apache.hadoop.security.Credentials"</span> <span class="string">"read"</span>)</span><br></pre></td></tr></table></figure><p>A: 修复报错</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改 ../plugins/repository-hdfs/plugin-security.policy</span></span><br><span class="line"><span class="comment"># 增加如下：</span></span><br><span class="line">  permission java.lang.RuntimePermission <span class="string">"accessDeclaredMembers"</span>;</span><br><span class="line">  permission java.lang.RuntimePermission <span class="string">"getClassLoader"</span>;</span><br><span class="line">  permission java.lang.RuntimePermission <span class="string">"shutdownHooks"</span>;</span><br><span class="line">  permission java.lang.reflect.ReflectPermission <span class="string">"suppressAccessChecks"</span>;</span><br><span class="line">  permission javax.security.auth.AuthPermission <span class="string">"doAs"</span>;</span><br><span class="line">  permission javax.security.auth.AuthPermission <span class="string">"getSubject"</span>;</span><br><span class="line">  permission javax.security.auth.AuthPermission <span class="string">"modifyPrivateCredentials"</span>;</span><br><span class="line">  permission java.security.AllPermission;</span><br><span class="line">  permission java.util.PropertyPermission <span class="string">"*"</span>, <span class="string">"read,write"</span>;</span><br><span class="line">  permission javax.security.auth.PrivateCredentialPermission <span class="string">"org.apache.hadoop.security.Credentials * \"*\""</span>, <span class="string">"read"</span>;</span><br><span class="line">  </span><br><span class="line"><span class="comment"># 修改Elastic配置目录下jvm.options</span></span><br><span class="line"><span class="comment"># 指定权限文件</span></span><br><span class="line">-Djava.security.policy=file:///usr/share/elasticsearch/plugins/repository-hdfs/plugin-security.policy</span><br></pre></td></tr></table></figure><h2 id="重启ES服务加载插件"><a href="#重启ES服务加载插件" class="headerlink" title="重启ES服务加载插件"></a>重启ES服务加载插件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/elasticsearch restart</span><br></pre></td></tr></table></figure><h2 id="利用快照API备份"><a href="#利用快照API备份" class="headerlink" title="利用快照API备份"></a>利用快照API备份</h2><ul><li>在hdfs上创建备份目录授权</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -mkdir /es_backup</span><br><span class="line"><span class="comment">#要求es用户可读写</span></span><br><span class="line">hadoop fs -chown elasticsearch:elasticsearch /es_backup</span><br></pre></td></tr></table></figure><ul><li>创建仓库</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">PUT /_snapshot/my_backup  </span><br><span class="line">&#123;  </span><br><span class="line">  <span class="string">"type"</span>: <span class="string">"hdfs"</span>,  </span><br><span class="line">  <span class="string">"settings"</span>: &#123;  </span><br><span class="line">         <span class="string">"path"</span>: <span class="string">"/es_backup"</span>,  </span><br><span class="line">         <span class="string">"load_defaults"</span>: <span class="string">"true"</span>,  </span><br><span class="line">         <span class="string">"compress"</span>: <span class="string">"true"</span>,  </span><br><span class="line">         <span class="string">"uri"</span>: <span class="string">"hdfs://172.26.33.55:8020"</span></span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 查看仓库信息</span></span><br><span class="line">GET /_snapshot/my_backup</span><br><span class="line"><span class="comment"># 删除仓库</span></span><br><span class="line">DELETE /_snapshot/my_backup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 此时查看HDFS上的文件</span></span><br><span class="line">hadoop fs -ls /es_backup</span><br><span class="line">hadoop fs -cat /es_backup/index-0</span><br></pre></td></tr></table></figure><ul><li>创建快照</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">PUT /_snapshot/my_backup/snapshot_1?wait_for_completion=<span class="literal">true</span>  </span><br><span class="line">&#123;  </span><br><span class="line">  <span class="string">"indices"</span>: <span class="string">"index_1,index_2"</span>, //不设置这个属性，默认备份所有index</span><br><span class="line">  <span class="string">"ignore_unavailable"</span>: <span class="literal">true</span>,  </span><br><span class="line">  <span class="string">"include_global_state"</span>: <span class="literal">false</span>  </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 查看快照信息，支持通配符</span></span><br><span class="line">GET _snapshot/my_backup/snapshot_1</span><br><span class="line"><span class="comment"># 删除快照，这里只是es的引用删除，hdfs中的文件并不会删除</span></span><br><span class="line">DELETE _snapshot/my_backup/snapshot_1</span><br></pre></td></tr></table></figure><ul><li>恢复快照</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">POST /_snapshot/my_backup/snapshot_1/_restore  </span><br><span class="line">&#123;  </span><br><span class="line">  <span class="string">"indices"</span>: <span class="string">"index_1,index_2"</span>,   //指定索引恢复，不指定就是所有</span><br><span class="line">  <span class="string">"ignore_unavailable"</span>: <span class="literal">true</span>,     //忽略恢复时异常索引  </span><br><span class="line">  <span class="string">"include_global_state"</span>: <span class="literal">false</span>,  //是否存储全局转态信息,fasle代表有一个或几个失败，不会导致整个任务失败  </span><br><span class="line">  <span class="string">"rename_pattern"</span>: <span class="string">"index_(.+)"</span>, //是否需要重命名索引  </span><br><span class="line">  <span class="string">"rename_replacement"</span>: <span class="string">"restored_index_<span class="variable">$1</span>"</span> //替换后的索引名  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 监控恢复情况</span></span><br><span class="line">GET restored_index_1/_recovery</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;版本信息&quot;&gt;&lt;a href=&quot;#版本信息&quot; class=&quot;headerlink&quot; title=&quot;版本信息&quot;&gt;&lt;/a&gt;版本信息&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;ElasticSearch: 5.3.0&lt;br&gt;JDK: 1.8&lt;br&gt;OS: CentOS re
      
    
    </summary>
    
      <category term="Elasticsearch" scheme="http://finsos.github.io/categories/Elasticsearch/"/>
    
    
      <category term="elasticsearch" scheme="http://finsos.github.io/tags/elasticsearch/"/>
    
  </entry>
  
  <entry>
    <title>setup模块过滤多个返回参数</title>
    <link href="http://finsos.github.io/wiki/setup%E6%A8%A1%E5%9D%97%E8%BF%87%E6%BB%A4%E5%A4%9A%E4%B8%AA%E8%BF%94%E5%9B%9E%E5%8F%82%E6%95%B0/"/>
    <id>http://finsos.github.io/wiki/setup模块过滤多个返回参数/</id>
    <published>2018-07-28T14:00:42.348Z</published>
    <updated>2018-07-28T15:25:04.719Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一句话命令"><a href="#一句话命令" class="headerlink" title="一句话命令"></a>一句话命令</h2><ul><li>使用setup模块过滤多个返回参数，这里用到了jq来解析返回的json数据<br><code>ansible hosts -m setup | sed &#39;s/.*=&gt;//g&#39;|jq &#39;.ansible_facts|{ip: .ansible_default_ipv4.address, version: .ansible_distribution_version}&#39;</code></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;一句话命令&quot;&gt;&lt;a href=&quot;#一句话命令&quot; class=&quot;headerlink&quot; title=&quot;一句话命令&quot;&gt;&lt;/a&gt;一句话命令&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;使用setup模块过滤多个返回参数，这里用到了jq来解析返回的json数据&lt;br&gt;&lt;code&gt;ansib
      
    
    </summary>
    
      <category term="运维记录" scheme="http://finsos.github.io/categories/%E8%BF%90%E7%BB%B4%E8%AE%B0%E5%BD%95/"/>
    
      <category term="ansible" scheme="http://finsos.github.io/categories/%E8%BF%90%E7%BB%B4%E8%AE%B0%E5%BD%95/ansible/"/>
    
    
      <category term="ansible" scheme="http://finsos.github.io/tags/ansible/"/>
    
  </entry>
  
  <entry>
    <title>准备开始 深度学习</title>
    <link href="http://finsos.github.io/wiki/%E8%BF%9B%E5%86%9B%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    <id>http://finsos.github.io/wiki/进军深度学习/</id>
    <published>2018-02-26T14:11:01.614Z</published>
    <updated>2018-07-28T15:25:11.999Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>一直写了没有发出， 拖沓症真的挺严重。。。</p></blockquote><h2 id="进军深度学习课程"><a href="#进军深度学习课程" class="headerlink" title="进军深度学习课程"></a>进军深度学习课程</h2><p>近期看了一些关于人工智能系列的文章，对这种前沿的技术充满了兴趣，但是苦于上学时候没有好好学习😂，所以想补充一下数学基础知识。学习的过程中顺便温习了一下解方程</p><h2 id="目前看的数学书籍"><a href="#目前看的数学书籍" class="headerlink" title="目前看的数学书籍"></a>目前看的数学书籍</h2><ul><li><p>线性代数</p><p>看了前面几章，了解了下向量的概念，以及矩阵的概念。其次，就是解方程组。</p><blockquote><p>又是一两个月没看了，忘得差不多了，唉</p></blockquote></li><li><p>离散数学</p><p>暂时搁置</p></li></ul><h2 id="简单数学示例"><a href="#简单数学示例" class="headerlink" title="简单数学示例"></a>简单数学示例</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/env python</span></span><br><span class="line"><span class="comment">#-*-encoding: utf8-*-</span></span><br><span class="line"><span class="comment">#python解一元方程</span></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">usag: </span></span><br><span class="line"><span class="string">    simple.py number power symbol</span></span><br><span class="line"><span class="string">notice: </span></span><br><span class="line"><span class="string">    please input full args.</span></span><br><span class="line"><span class="string">args: </span></span><br><span class="line"><span class="string">    number - you can input any numbers.</span></span><br><span class="line"><span class="string">    power  - it's a power for number like 3^2, the 2 is 3'power.</span></span><br><span class="line"><span class="string">    symbol - the math symbol like +,-,*,/</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">quadratic</span><span class="params">(number, power, symbol)</span>:</span></span><br><span class="line">    i = <span class="number">1</span></span><br><span class="line">    result = []</span><br><span class="line">    text = []</span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        calc_text = str(pow(number, power)) + <span class="string">' '</span> + symbol + <span class="string">' '</span> + str(pow((number - i), power))            </span><br><span class="line">        calc_result = eval(calc_text)</span><br><span class="line">        i += <span class="number">1</span>     </span><br><span class="line">        <span class="keyword">if</span> calc_result &lt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">print</span> (<span class="string">u'no solution!'</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> i &gt; number:</span><br><span class="line">            <span class="keyword">break</span>       </span><br><span class="line">        result.append(calc_result)</span><br><span class="line">        text.append(calc_text)</span><br><span class="line">    <span class="keyword">return</span> result, text</span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        number = os.sys.argv[<span class="number">1</span>]</span><br><span class="line">        power  = os.sys.argv[<span class="number">2</span>]</span><br><span class="line">        symbol = os.sys.argv[<span class="number">3</span>]</span><br><span class="line">        number = int(number)</span><br><span class="line">        power  = int(power)</span><br><span class="line">        symbol = str(symbol)</span><br><span class="line">        symbol_standard = <span class="string">'+-*/'</span></span><br><span class="line">        symbol_sense = string.find(symbol_standard, symbol) != <span class="number">-1</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> (isinstance(number,int) <span class="keyword">and</span> isinstance(power,int) <span class="keyword">and</span> symbol_sense):</span><br><span class="line">            <span class="keyword">print</span> (__doc__)</span><br><span class="line">            os.sys.exit(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception:</span><br><span class="line">        <span class="keyword">print</span> (__doc__)</span><br><span class="line">        os.sys.exit(<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">    (result,text) = quadratic(number, power, symbol)</span><br><span class="line">    </span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    total = int()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(text)):</span><br><span class="line">        total += result[i]</span><br><span class="line">        <span class="keyword">print</span> (<span class="string">'%s = %s'</span> % (text[i], result[i]))</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> i &gt; len(text):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">print</span> (<span class="string">'total: %s \nlength: %s \naverage: %s'</span> % (total, len(text), round(total/len(text))))</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;一直写了没有发出， 拖沓症真的挺严重。。。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;进军深度学习课程&quot;&gt;&lt;a href=&quot;#进军深度学习课程&quot; class=&quot;headerlink&quot; title=&quot;进军深度学习课程&quot;&gt;&lt;/a&gt;进军深度学习
      
    
    </summary>
    
      <category term="文笔随记" scheme="http://finsos.github.io/categories/%E6%96%87%E7%AC%94%E9%9A%8F%E8%AE%B0/"/>
    
      <category term="向往" scheme="http://finsos.github.io/categories/%E6%96%87%E7%AC%94%E9%9A%8F%E8%AE%B0/%E5%90%91%E5%BE%80/"/>
    
    
      <category term="python" scheme="http://finsos.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>centos搭建局域网repo源</title>
    <link href="http://finsos.github.io/wiki/centos%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0repo%E6%BA%90/"/>
    <id>http://finsos.github.io/wiki/centos搭建本地repo源/</id>
    <published>2018-01-20T05:35:41.000Z</published>
    <updated>2018-07-28T15:24:47.264Z</updated>
    
    <content type="html"><![CDATA[<p>起初是因为有些时候需要安装的一些包总是在系统自带的repo仓库找不到，有些国外的源又很慢，自己本地都要下载很长时间，偶尔又有一些依赖缺失之类的，干脆就把自己工作环境中所需要的包存起来，自己建一个内网仓库，于是有了下面这篇文章。</p><h2 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h2><ul><li>安装httpd服务或者nginx服务。#省略</li></ul><h2 id="一些目录设定"><a href="#一些目录设定" class="headerlink" title="一些目录设定"></a>一些目录设定</h2><ul><li>DocumentRoot: /var/www/html</li><li>RepoDirectory: /var/www/html/HDP-UTILS-1.1.0.21</li><li>脚本目录： /etc/init.d</li></ul><h2 id="下载需要的RPM"><a href="#下载需要的RPM" class="headerlink" title="下载需要的RPM"></a>下载需要的RPM</h2><ul><li>进入DocumentRoot，将下载的rpm包copy至该目录</li><li><p>或者直接从已有源地址仓库下载：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#下载该目录下所有文件</span></span><br><span class="line">wget -c -r -np -P /var/www/html http://hdp.domain/HDP-UTILS-1.1.0.21</span><br></pre></td></tr></table></figure></li><li><p>解释一下wget命令的用法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-c 断点续传</span><br><span class="line">-r 递归下载</span><br><span class="line">-np 不下载父附录</span><br><span class="line">-nd 不建立目录，若无此选项，将按照网站目录结构创建目录</span><br><span class="line">-P 将下载的所有内容存放到指定目录</span><br></pre></td></tr></table></figure></li></ul><h2 id="使用createrepo命令创建repo信息"><a href="#使用createrepo命令创建repo信息" class="headerlink" title="使用createrepo命令创建repo信息"></a>使用createrepo命令创建repo信息</h2><ul><li><p>安装createrepo</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#一般centos自带的yum仓库就有</span></span><br><span class="line">yum install -y createrepo</span><br></pre></td></tr></table></figure></li><li><p>执行命令创建repo</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#初始化源,生成repodata元数据,保存在RepoDirectory</span><br><span class="line">createrepo --workers=2 -pdo /var/www/html/HDP-UTILS-1.1.0.21 /var/www/html/HDP-UTILS-1.1.0.21 -c /tmp/HDP-UTILS-1.1.0.21 -v</span><br></pre></td></tr></table></figure></li><li><p>解释一下createrepo命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-p 以漂亮的格式输出xml</span><br><span class="line">-d 使用sqlite存储生成的元数据，默认项</span><br><span class="line">-o 指定元数据的输出位置</span><br><span class="line">-c 指定缓存目录，缓存软件仓库中软件包的校验和信息</span><br><span class="line">-v 以详细模式输出</span><br></pre></td></tr></table></figure></li></ul><h2 id="启动http服务"><a href="#启动http服务" class="headerlink" title="启动http服务"></a>启动http服务</h2><ul><li>启动服务以供其他机器访问<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/httpd restart</span><br></pre></td></tr></table></figure></li></ul><h2 id="创建客户端使用的repo文件"><a href="#创建客户端使用的repo文件" class="headerlink" title="创建客户端使用的repo文件"></a>创建客户端使用的repo文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/yum.repos.d/HDP-UTILS.repo &lt;&lt;EOF</span><br><span class="line">    <span class="comment">#VERSION_NUMBER=1.1.0.21</span></span><br><span class="line">    [HDP-UTILS-1.1.0.21]</span><br><span class="line">    name=HDP-UTILS-1.1.0.21</span><br><span class="line">    baseurl=http://local.network.domain/HDP-UTILS-1.1.0.21/</span><br><span class="line">    gpgcheck=0</span><br><span class="line">    enabled=1</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h2 id="访问测试"><a href="#访问测试" class="headerlink" title="访问测试"></a>访问测试</h2><ul><li>浏览器访问[<a href="http://local.network.domain/HDP-UTILS-1.1.0.21/" rel="external nofollow noopener noreferrer" target="_blank">http://local.network.domain/HDP-UTILS-1.1.0.21/</a>]</li><li>客户端服务器使用命令 <code>yum repolist|grep &quot;HDP-UTILS-1.1.0.21&quot;</code> 看能否获取到正确的repo和文件数量</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;起初是因为有些时候需要安装的一些包总是在系统自带的repo仓库找不到，有些国外的源又很慢，自己本地都要下载很长时间，偶尔又有一些依赖缺失之类的，干脆就把自己工作环境中所需要的包存起来，自己建一个内网仓库，于是有了下面这篇文章。&lt;/p&gt;
&lt;h2 id=&quot;依赖&quot;&gt;&lt;a href
      
    
    </summary>
    
      <category term="运维记录" scheme="http://finsos.github.io/categories/%E8%BF%90%E7%BB%B4%E8%AE%B0%E5%BD%95/"/>
    
      <category term="Linux" scheme="http://finsos.github.io/categories/%E8%BF%90%E7%BB%B4%E8%AE%B0%E5%BD%95/Linux/"/>
    
    
      <category term="repo仓库" scheme="http://finsos.github.io/tags/repo%E4%BB%93%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>写在第一篇文章的话</title>
    <link href="http://finsos.github.io/wiki/%E5%86%99%E5%9C%A8%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0%E7%9A%84%E8%AF%9D/"/>
    <id>http://finsos.github.io/wiki/写在第一篇文章的话/</id>
    <published>2018-01-19T15:23:44.000Z</published>
    <updated>2018-07-28T15:26:09.285Z</updated>
    
    <content type="html"><![CDATA[<p>博客开张了，The first blood还是要贡献一下，接触博客好多，今天算是第一次完全搭建属于自己的个人博客，也是无意间接触到GitHub Pages，觉得很方便，而且完美支持Markdown，就这么选好模板入坑了。</p><h2 id="写在第一篇文章的话"><a href="#写在第一篇文章的话" class="headerlink" title="写在第一篇文章的话"></a>写在第一篇文章的话</h2><p>这个博客，主要是用于记录自己的学习过程，以及工作中所踩的一些新坑，包括自己脑子记不住的知识点(大家都懂的^_^)!</p><p>其实偶尔也会有一些自己的心情体会发表一下，主要是吐槽啦~</p><h2 id="为什么开博客"><a href="#为什么开博客" class="headerlink" title="为什么开博客"></a>为什么开博客</h2><ul><li>希望养成良好的个人习惯</li><li>技术更新迭代很快，对我这种战5渣的冲击力太大，必须时刻提醒自己要思（挣）考（钱）！要学（高）习（薪）！</li><li>不定时更新，自己满足就好，当然，如果文章中有涉及到可以帮助大家的知识点，我也是很开心啦啦啦~</li></ul><h2 id="我是什么人"><a href="#我是什么人" class="headerlink" title="我是什么人"></a>我是什么人</h2><ul><li>目前一名普通的Linux运维（民工）</li><li>接触了一些貌似高大山的东西，消息队列、分布式计算、分布式存储、虚拟化、自动化运维、DevOps 等等</li><li>对于上面那些平时光说，光听，实际原理其实并没有吃透，纯粹操作一点，学会一点，其实然并卵。</li></ul><h2 id="本篇完"><a href="#本篇完" class="headerlink" title="本篇完"></a>本篇完</h2><ul><li>有点晚了，需要睡觉了，想起来再说。</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;博客开张了，The first blood还是要贡献一下，接触博客好多，今天算是第一次完全搭建属于自己的个人博客，也是无意间接触到GitHub Pages，觉得很方便，而且完美支持Markdown，就这么选好模板入坑了。&lt;/p&gt;
&lt;h2 id=&quot;写在第一篇文章的话&quot;&gt;&lt;a 
      
    
    </summary>
    
      <category term="文笔随记" scheme="http://finsos.github.io/categories/%E6%96%87%E7%AC%94%E9%9A%8F%E8%AE%B0/"/>
    
      <category term="心情" scheme="http://finsos.github.io/categories/%E6%96%87%E7%AC%94%E9%9A%8F%E8%AE%B0/%E5%BF%83%E6%83%85/"/>
    
    
  </entry>
  
</feed>
